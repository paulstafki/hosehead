/*! hosehead 2015-09-01 */
myApp.controller("AddhappyhourController",["$scope",function(a){}]),myApp.controller("UserController",["$scope","$http",function(a,b){a.displayedName="",a.userOnLoad=function(){b({url:"/username",method:"GET"}).success(function(b){a.displayedName=b.username}).error(function(){console.log("error")})},a.userOnLoad()}]),myApp.controller("EstablishmentController",["$scope","$http","$location","$rootScope","EstablishmentService",function(a,b,c,d,e){a.establishment={},a.data=e.data,a.establishments=a.data.establishments,a.getEstablishments=function(){e.getHappyHours(a.zipcode),console.log(e.data.establishments),console.log("getEstablishments zipcode "+a.zipcode)},a.reportFalse=function(a){b({url:"/flag/"+a._id,method:"PUT",data:a,headers:{"Content-Type":"application/json;charset=utf-8"}}).then(function(a){alert("False information flagged - we'll get right on it, thank you!")},function(a){console.log(a)})},a.upvote=function(a){a.upvotes+=1,b({url:"/upvote/"+a._id,method:"PUT",data:a,headers:{"Content-Type":"application/json;charset=utf-8"}}).then(function(a){console.log(a)},function(a){console.log(a)})},a.downvote=function(a){a.downvotes+=1,b({url:"/downvote/"+a._id,method:"PUT",data:a,headers:{"Content-Type":"application/json;charset=utf-8"}}).then(function(a){console.log(a)},function(a){console.log(a)})}}]),myApp.factory("EstablishmentService",["$http","$location",function(a,b){var c;return c={establishments:[]},{getHappyHours:function(d){return console.log("Est Servive zip code "+d),a.post("/happyhour/"+d).then(function(a){c.establishments=a.data,console.log(a.data),b.path("results")})},data:c}}]);