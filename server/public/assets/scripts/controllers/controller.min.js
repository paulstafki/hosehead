/*! hosehead 2015-09-01 */
myApp.controller("AddhappyhourController",["$scope",function(a){}]),myApp.controller("UserController",["$scope","$http",function(a,b){a.currentUser={},a.userOnLoad=function(){b({url:"/username",method:"GET"}).success(function(b){a.currentUser=b}).error(function(){console.log("error")})},a.userOnLoad(),a.rank=a.currentUser.rank,a.incUserActivity=function(){var c=a.currentUser;switch(c.useractivity+=1,console.log(c.rank),console.log(c.useractivity),!0){case c.useractivity<5:c.rank="Newb";break;case c.useractivity>4&&c.useractivity<10:c.rank="Hoser";break;case c.useractivity>9&&c.useractivity<20:c.rank="Knob";break;case c.useractivity>19&&c.useractivity<30:c.rank="Jelly Donut";break;case c.useractivity>29&&c.useractivity<40:c.rank="Brewmeister Smith";break;case c.useractivity>39&&c.useractivity<50:c.rank="Mad Von Sydow";break;case c.useractivity>49&&c.useractivity<60:c.rank="Rosie LaRose";break;case c.useractivity>59&&c.useractivity<70:c.rank="Bob McKenzie";break;case c.useractivity>69&&c.useractivity<80:c.rank="Doug McKenzie";break;case c.useractivity>79&&c.useractivity<100:c.rank="Hosehead";break;case c.useractivity>99&&c.useractivity<9999999:c.rank="Admin?";break;default:c.rank="newb"}console.log(c.rank),console.log(c.useractivity),b({url:"/incUser/"+c._id,method:"PUT",data:c,headers:{"Content-Type":"application/json;charset=utf-8"}}).then(function(a){console.log(a)},function(a){console.log(a)})}}]),myApp.controller("EstablishmentController",["$scope","$http","$location","$rootScope","EstablishmentService",function(a,b,c,d,e){a.establishment={},a.data=e.data,a.establishments=a.data.establishments,a.getEstablishments=function(){e.getHappyHours(a.zipcode),console.log(e.data.establishments),console.log("getEstablishments zipcode "+a.zipcode)},a.reportFalse=function(a){b({url:"/flag/"+a._id,method:"PUT",data:a,headers:{"Content-Type":"application/json;charset=utf-8"}}).then(function(a){alert("False information flagged - we'll get right on it, thank you!")},function(a){console.log(a)})},a.upvote=function(a){a.upvotes+=1,b({url:"/upvote/"+a._id,method:"PUT",data:a,headers:{"Content-Type":"application/json;charset=utf-8"}}).then(function(a){console.log(a)},function(a){console.log(a)})},a.downvote=function(a){a.downvotes+=1,b({url:"/downvote/"+a._id,method:"PUT",data:a,headers:{"Content-Type":"application/json;charset=utf-8"}}).then(function(a){console.log(a)},function(a){console.log(a)})}}]),myApp.factory("EstablishmentService",["$http","$location",function(a,b){var c;return c={establishments:[]},{getHappyHours:function(d){return console.log("Est Servive zip code "+d),a.post("/happyhour/"+d).then(function(a){c.establishments=a.data,console.log(a.data),b.path("results")})},data:c}}]);